<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
 		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<title>LanHub v2</title>
		<link href="/stylesheets/style.css" rel="stylesheet">
		<script type="text/javascript">
// <![CDATA[
		function scrollToBottom(elm_id)
			{
			var elm = document.getElementById(elm_id);
				elm.scrollTop = elm.scrollHeight;
			}
		// ]]>
		</script>
	</head>

	<body>
		<div id="menu">
			<h1>LanHub</h1>
			<h4>best chat system evar.</h4>
			<h4><br>eventually a list of chat rooms and users will go here.</h4>
		</div>
		<div id="main">
			<h1 style="padding:10px;">v2.0.1 chat</h1>
			<div id="messagebox">
				<ul id="messages"></ul>
			</div>
			<div id="chat-input">
				<form action="">
					<input id="m" autocomplete="off"/><button>Send</button>
				</form>
			</div>
		</div>
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script>
	  var socket = io();
	  $('form').submit(function(){
	    socket.emit('chat message', $('#m').val());
	    $('#m').val('');
	    return false;
	  });
	  socket.on('chat message', function(msg){
	    $('#messages').append($('<li>').text(msg));
	    scrollToBottom('messagebox');
	  });
	  socket.on('server message', function(msg){
	  $('#messages').append($('<li style="color:#F00">').text(msg));
	  scrollToBottom('messagebox');
	  });
	</script>
	</body>
</html>